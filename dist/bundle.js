!function(e){function t(e){var t=require("./"+e+"."+m+".hot-update.js");d(t.id,t.modules)}function r(){try{var e=require("./"+m+".hot-update.json")}catch(e){return Promise.resolve()}return Promise.resolve(e)}function n(e){delete installedChunks[e]}function o(e){var t=L[e];if(!t)return f;var r=function(r){return t.hot.active?(L[r]?L[r].parents.indexOf(e)<0&&L[r].parents.push(e):(C=[e],h=r),t.children.indexOf(r)<0&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),C=[]),f(r)};for(var n in f)Object.prototype.hasOwnProperty.call(f,n)&&"e"!==n&&Object.defineProperty(r,n,function(e){return{configurable:!0,enumerable:!0,get:function(){return f[e]},set:function(t){f[e]=t}}}(n));return r.e=function(e){function t(){W--,"prepare"===w&&(S[e]||c(e),0===W&&0===A&&u())}return"ready"===w&&i("prepare"),W++,f.e(e).then(t,function(e){throw t(),e})},r}function a(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:h!==e,active:!0,accept:function(e,r){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._acceptedDependencies[e[n]]=r||function(){};else t._acceptedDependencies[e]=r||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._declinedDependencies[e[r]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var r=t._disposeHandlers.indexOf(e);r>=0&&t._disposeHandlers.splice(r,1)},check:l,apply:p,status:function(e){if(!e)return w;T.push(e)},addStatusHandler:function(e){T.push(e)},removeStatusHandler:function(e){var t=T.indexOf(e);t>=0&&T.splice(t,1)},data:x[e]};return h=void 0,t}function i(e){w=e;for(var t=0;t<T.length;t++)T[t].call(null,e)}function s(e){return+e+""===e?+e:e}function l(e){if("idle"!==w)throw new Error("check() is only allowed in idle status");return b=e,i("check"),r().then(function(e){if(!e)return i("idle"),null;E={},S={},O=e.c,v=e.h,i("prepare");var t=new Promise(function(e,t){g={resolve:e,reject:t}});y={};return c(0),"prepare"===w&&0===W&&0===A&&u(),t})}function d(e,t){if(O[e]&&E[e]){E[e]=!1;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(y[r]=t[r]);0==--A&&0===W&&u()}}function c(e){O[e]?(E[e]=!0,A++,t(e)):S[e]=!0}function u(){i("ready");var e=g;if(g=null,e)if(b)p(b).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var r in y)Object.prototype.hasOwnProperty.call(y,r)&&t.push(s(r));e.resolve(t)}}function p(t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.indexOf(n)<0&&e.push(n)}}if("ready"!==w)throw new Error("apply() is only allowed in ready status");t=t||{};var o,a,l,d,c,u={},p=[],h={},g=function(){console.warn("[HMR] unexpected require("+D.moduleId+") to disposed module")};for(var b in y)if(Object.prototype.hasOwnProperty.call(y,b)){c=s(b);var D;D=y[b]?function(e){for(var t=[e],n={},o=t.slice().map(function(e){return{chain:[e],id:e}});o.length>0;){var a=o.pop(),i=a.id,s=a.chain;if((d=L[i])&&!d.hot._selfAccepted){if(d.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:i};if(d.hot._main)return{type:"unaccepted",chain:s,moduleId:i};for(var l=0;l<d.parents.length;l++){var c=d.parents[l],u=L[c];if(u){if(u.hot._declinedDependencies[i])return{type:"declined",chain:s.concat([c]),moduleId:i,parentId:c};t.indexOf(c)>=0||(u.hot._acceptedDependencies[i]?(n[c]||(n[c]=[]),r(n[c],[i])):(delete n[c],t.push(c),o.push({chain:s.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}(c):{type:"disposed",moduleId:b};var T=!1,A=!1,W=!1,S="";switch(D.chain&&(S="\nUpdate propagation: "+D.chain.join(" -> ")),D.type){case"self-declined":t.onDeclined&&t.onDeclined(D),t.ignoreDeclined||(T=new Error("Aborted because of self decline: "+D.moduleId+S));break;case"declined":t.onDeclined&&t.onDeclined(D),t.ignoreDeclined||(T=new Error("Aborted because of declined dependency: "+D.moduleId+" in "+D.parentId+S));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(D),t.ignoreUnaccepted||(T=new Error("Aborted because "+c+" is not accepted"+S));break;case"accepted":t.onAccepted&&t.onAccepted(D),A=!0;break;case"disposed":t.onDisposed&&t.onDisposed(D),W=!0;break;default:throw new Error("Unexception type "+D.type)}if(T)return i("abort"),Promise.reject(T);if(A){h[c]=y[c],r(p,D.outdatedModules);for(c in D.outdatedDependencies)Object.prototype.hasOwnProperty.call(D.outdatedDependencies,c)&&(u[c]||(u[c]=[]),r(u[c],D.outdatedDependencies[c]))}W&&(r(p,[D.moduleId]),h[c]=g)}var E=[];for(a=0;a<p.length;a++)c=p[a],L[c]&&L[c].hot._selfAccepted&&E.push({module:c,errorHandler:L[c].hot._selfAccepted});i("dispose"),Object.keys(O).forEach(function(e){!1===O[e]&&n(e)});for(var B,M=p.slice();M.length>0;)if(c=M.pop(),d=L[c]){var k={},F=d.hot._disposeHandlers;for(l=0;l<F.length;l++)(o=F[l])(k);for(x[c]=k,d.hot.active=!1,delete L[c],l=0;l<d.children.length;l++){var j=L[d.children[l]];j&&((B=j.parents.indexOf(c))>=0&&j.parents.splice(B,1))}}var N,q;for(c in u)if(Object.prototype.hasOwnProperty.call(u,c)&&(d=L[c]))for(q=u[c],l=0;l<q.length;l++)N=q[l],(B=d.children.indexOf(N))>=0&&d.children.splice(B,1);i("apply"),m=v;for(c in h)Object.prototype.hasOwnProperty.call(h,c)&&(e[c]=h[c]);var H=null;for(c in u)if(Object.prototype.hasOwnProperty.call(u,c)){d=L[c],q=u[c];var I=[];for(a=0;a<q.length;a++)N=q[a],o=d.hot._acceptedDependencies[N],I.indexOf(o)>=0||I.push(o);for(a=0;a<I.length;a++){o=I[a];try{o(q)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:c,dependencyId:q[a],error:e}),t.ignoreErrored||H||(H=e)}}}for(a=0;a<E.length;a++){var _=E[a];c=_.module,C=[c];try{f(c)}catch(e){if("function"==typeof _.errorHandler)try{_.errorHandler(e)}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:r,orginalError:e}),t.ignoreErrored||H||(H=r),H||(H=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:c,error:e}),t.ignoreErrored||H||(H=e)}}return H?(i("fail"),Promise.reject(H)):(i("idle"),new Promise(function(e){e(p)}))}function f(t){if(L[t])return L[t].exports;var r=L[t]={i:t,l:!1,exports:{},hot:a(t),parents:(D=C,C=[],D),children:[]};return e[t].call(r.exports,r,r.exports,o(t)),r.l=!0,r.exports}var h,g,y,v,b=!0,m="bb2933ebcd40caaf094e",x={},C=[],D=[],T=[],w="idle",A=0,W=0,S={},E={},O={},L={};f.m=e,f.c=L,f.i=function(e){return e},f.d=function(e,t,r){f.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="/static/",f.h=function(){return m},o(16)(f.s=16)}([function(e,t,r){"use strict";var n={webserviceUrl:"http://tcbds.xicp.io:8888/yuqing"};e.exports=n},function(e,t){e.exports=require("deasync")},function(e,t){e.exports=require("request")},function(e,t,r){"use strict";var n=r(0),o=r(2),a=r(1),i=r(4),s={login:function(){var e={},t=!1,r={username:"node_service",password:"node_service_topcom",captcha:"test"},s=n.webserviceUrl+"/login/login?"+i.stringify(r);for(o({url:s,method:"post",headers:{"content-type":"application/json"}},function(r,n,o){r||200!=n.statusCode?(t=!0,console.log("login error",r)):(t=!0,console.log("login success!"),o=JSON.parse(o),global.token=o.token,e.token=o.token)});!t;)a.runLoopOnce();return e},getRequestHeader:function(){var e=this,t={"content-type":"application/json"};if(void 0==global.token){var r=e.login();console.log("token",r.token)}return void 0!=global.token&&(t.Authorization=global.token),t}};e.exports=s},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";var n={parseDate:function(e){if("string"==typeof e){var t=e.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) *$/);if(t&&t.length>3)return new Date(parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3]));if((t=e.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2}) *$/))&&t.length>6)return new Date(parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3]),parseInt(t[4]),parseInt(t[5]),parseInt(t[6]));if((t=e.match(/^ *(\d{4})-(\d{1,2})-(\d{1,2}) +(\d{1,2}):(\d{1,2}):(\d{1,2})\.(\d{1,9}) *$/))&&t.length>7)return new Date(parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3]),parseInt(t[4]),parseInt(t[5]),parseInt(t[6]),parseInt(t[7]))}return null},formatDate:function(e,t){var r=e,n={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},addDate:function(e,t,r){var n=e;switch(t){case"s":return new Date(Date.parse(n)+1e3*r);case"n":return new Date(Date.parse(n)+6e4*r);case"h":return new Date(Date.parse(n)+36e5*r);case"d":return new Date(Date.parse(n)+864e5*r);case"w":return new Date(Date.parse(n)+6048e5*r);case"q":return new Date(n.getFullYear(),n.getMonth()+3*r,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case"m":return new Date(n.getFullYear(),n.getMonth()+r,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());case"M":return new Date(n.getFullYear(),n.getMonth()+r,1,0,0,0);case"y":return new Date(n.getFullYear()+r,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())}}};e.exports=n},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={},a=[],i=Object.getPrototypeOf,s={},l=s.toString,d=s.hasOwnProperty,c=d.toString,u=c.call(Object),p=a.indexOf;o.extend=function(){var e,t,r,a,i,s,l=arguments[0]||{},d=1,c=arguments.length,u=!1;for("boolean"==typeof l&&(u=l,l=arguments[d]||{},d++),"object"!==(void 0===l?"undefined":n(l))&&(l={}),d===c&&(l=this,d--);d<c;d++)if(null!=(e=arguments[d]))for(t in e)r=l[t],a=e[t],l!==a&&(u&&a&&(o.isPlainObject(a)||(i=Array.isArray(a)))?(i?(i=!1,s=r&&Array.isArray(r)?r:[]):s=r&&o.isPlainObject(r)?r:{},l[t]=o.extend(u,s,a)):void 0!==a&&(l[t]=a));return l},o.extend({isFunction:function(e){return"function"===o.type(e)},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==l.call(e))&&(!(t=i(e))||"function"==typeof(r=d.call(t,"constructor")&&t.constructor)&&c.call(r)===u)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"===(void 0===e?"undefined":n(e))||"function"==typeof e?s[l.call(e)]||"object":void 0===e?"undefined":n(e)},inArray:function(e,t,r){return null==t?-1:p.call(t,e,r)}}),e.exports=o},function(e,t,r){"use strict";var n=r(2),o=r(4),a=r(1),i=r(0),s=r(3),l={getProvinceLocality:function(e){var t={},r=!1,l={province:e},d=i.webserviceUrl+"/description/getProvinceLocality.json?"+o.stringify(l);for(n({url:d,method:"get",json:!0,headers:s.getRequestHeader()},function(e,n,o){e||200!=n.statusCode?console.log("get getProvinceLocality data error"):(console.log("getProvinceLocality http request return!"),r=!0,t=o)});!r;)a.runLoopOnce();return t},getOutOFAve:function(e,t){var r={},o=!1,l={lastMonthNum:e,monthNum:t},d=i.webserviceUrl+"/description/outOFAve";for(n({url:d,method:"post",json:!0,headers:s.getRequestHeader(),body:l},function(e,t,n){e||200!=t.statusCode?console.log("get getOutOFAve data error"):(console.log("getOutOFAve http request return!"),o=!0,r=n)});!o;)a.runLoopOnce();return r},getTrendOfOpinion:function(e,t){var r={},o=!1,l={lastMonthNum:e,monthNum:t};console.log("getTrendOfOpinion lastMonthNum",e),console.log("getTrendOfOpinion monthNum",t);var d=i.webserviceUrl+"/description/trendOfOpinion";for(n({url:d,method:"post",json:!0,headers:s.getRequestHeader(),body:l},function(e,t,n){e||200!=t.statusCode?console.log("get getTrendOfOpinion data error"):(console.log("getTrendOfOpinion http request return!"),o=!0,r=n)});!o;)a.runLoopOnce();return r},getHotArticle:function(e,t,r){var l={},d=!1,c={groupName:"title.raw",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:t,e_date:r},u=i.webserviceUrl+"/es/filterAndGroupBy.json?"+o.stringify(c);for(n({url:u,method:"get",json:!0,headers:s.getRequestHeader()},function(e,t,r){e||200!=t.statusCode?console.log("get getHotArticle data error"):(console.log("getHotArticle http request return!"),d=!0,r.length>0&&(l=r[0]))});!d;)a.runLoopOnce();return l}};e.exports=l},function(module,exports,__webpack_require__){"use strict";var utils={resetArticleTypeName:function(e){var t="";switch(e){case"news":t="新闻";break;case"weibo":t="微博";break;case"bbs":t="论坛";break;case"bar":t="贴吧";break;case"comments":t="评论";break;case"weixin":t="微信"}return t},resetEmotionTypeName:function(e){var t="";switch(e=e.toLowerCase()){case"pos":t="正面";break;case"neg":t="负面";break;case"neu":t="中性"}return t},resetDate:function(e){var t="";switch(e){case 1:t="星期一";break;case 2:t="星期二";break;case 3:t="星期三";break;case 4:t="星期四";break;case 5:t="星期五";break;case 6:t="星期六";break;case 0:t="星期日"}return t},replaceLabelLength:function replaceLabelLength(option,labelLength){return option=JSON.stringify(option,function(e,t){return"function"==typeof t?t+"":t}),option=option.replace(/labelLength/g,labelLength),option=JSON.parse(option,function(k,v){return v.indexOf&&v.indexOf("function")>-1?eval("(function(){return "+v+" })()"):v})}};module.exports=utils},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=require("canvas")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";function n(e){var t=e.briefingBody,r=[],n=!0,a=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var d=s.value;r.push(o(d))}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return e.briefingBody=r,e}function o(e){var t={},r=e.method;if(""!=r&&void 0!=r){t=y[r](global.reportParam),t.optionObj?e.option=t.optionObj:e.option=t.option,e.description=t.description;var n=process.cwd(),i=n+"/static/images/"+e.chartId+".png";e.chartType&&""!=e.chartType&&"table"!=e.chartType&&"keywordsCloud"!=e.chartType?f.renderEcharts({canvas:h,font:"14px 微软雅黑",path:n+"/static/images/"+e.chartId+".png",option:e.option,width:800,height:500}):"keywordsCloud"==e.chartType&&f.renderKeywordsCloud({path:n+"/static/images/"+e.chartId+".png",option:e.option,width:400,height:400}),e.chartType&&"table"!=e.chartType&&(e.imageUrl=a(i)),e.option=t.option}var s=e.children,l=[];if(s.length>0){var d=!0,c=!1,u=void 0;try{for(var p,g=s[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var v=p.value;l.push(o(v))}}catch(e){c=!0,u=e}finally{try{!d&&g.return&&g.return()}finally{if(c)throw u}}}return e}function a(e){var t=i.readFileSync(e);return new Buffer(t).toString("base64")}var i=(r(34),r(5)),s=(r(12),r(2)),l=r(1),d=r(0),c=r(25),u=r(27),p=r(28),f=r(17),h=r(11),g=r(3),y=u;t.getBriefingJson=function(){var e=global.reportParam,t="";"MONTHLY"===e.type?(y=u,t="BASE_MONTHLY"):"SPECIAL"===e.type?(y=p,t="BASE_SPECIAL"):"WEEKLY"===e.type&&(y=u,t="BASE_WEEKLY");var r={},o=!1,a=d.webserviceUrl+"/briefing/detail/type?type="+t;for(console.log("get base report url",a),s({url:a,method:"get",json:!0,headers:g.getRequestHeader()},function(t,a,i){if(!t&&200==a.statusCode){console.log("http request return!"),o=!0;var s=i[0];s._id&&delete s._id;var l=s;l=n(l),c.briefingDirector.createBriefing(l);var d=c.briefingBuilder;r=d.briefing,console.log("get briefing content success"),"MONTHLY"===e.type?r.type="MONTHLY":"SPECIAL"===e.type?r.type="SPECIAL":"WEEKLY"===e.type&&(r.type="WEEKLY"),r.title=y.getBriefingTitle(e),r.outline=y.getBriefingOutline(e),r.summary=y.getBriefingSummary(e),console.log("get outline success")}});!o;)l.runLoopOnce();return JSON.stringify(r,function(e,t){return"function"==typeof t?t+"":t})}},function(e,t,r){"use strict";var n=r(6),o={getReportParam:function(e){var t={type:"",mustWord:"",mustNotWord:"",shouldWord:"",startDate:"",endDate:""};return t.type=e.query.type,"SPECIAL"===e.query.type&&(t.name=e.query.name),t.startDate=n.formatDate(new Date(parseFloat(e.query.startTime)),"yyyy-MM-dd"),t.endDate=n.formatDate(new Date(parseFloat(e.query.endTime)),"yyyy-MM-dd"),t.shouldWord=e.query.shouldWord,t.mustWord=e.query.mustWord,t.mustNotWord=e.query.mustNotWord,"MONTHLY"===e.query.type?t.trendStartData=n.formatDate(n.addDate(new Date(parseFloat(e.query.startTime)),"M",-1),"yyyy-MM-dd"):"WEEKLY"===e.query.type&&(t.trendStartData=n.formatDate(n.addDate(new Date(parseFloat(e.query.startTime)),"d",-7),"yyyy-MM-dd")),console.log("getReportParam",t),t}};e.exports=o},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";var n=r(15),o=n(),a=r(5),i=r(13),s=r(14);o.all("*",function(e,t,r){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","X-Requested-With"),t.header("Access-Control-Allow-Methods","PUT,POST,GET,DELETE,OPTIONS"),t.header("X-Powered-By"," 3.2.1"),t.header("Content-Type","application/json;charset=utf-8"),r()}),o.get("/briefingJson",function(e,t){console.log("get briefing json",JSON.stringify(e.query)),global.reportParam=s.getReportParam(e);var r=i.getBriefingJson();a.writeFile("briefing.json",r,function(e){if(e)throw e;console.log("The file has been saved!")}),t.end(r)}),o.get("/briefingJson1",function(e,t){var r=process.cwd(),n=r+"/data/briefing.json",o=a.readFileSync(n,"utf8"),i=JSON.parse(o);t.end(JSON.stringify(i))}),o.get("/briefingJson2",function(e,t){var r=process.cwd(),n=r+"/data/specialBriefing.json",o=a.readFileSync(n,"utf8"),i=JSON.parse(o);t.end(JSON.stringify(i))}),o.get("/briefingJson.json",function(e,t){var r=__dirname+"/briefing.json";a.readFile(r,function(e,r){if(e)throw e;t.end(r)})});var l=o.listen(8081,function(){var e=l.address().address,t=l.address().port;console.log("应用实例，访问地址为 http://%s:%s",e,t)})},function(e,t,r){"use strict";function n(e){var t=void 0==e?"china":e,r=[];for(var n in u._provinceMap)r.push(n);var o="",a=c.resolve("./"),i=a+"/static/geoJson/china.json";return"china"===t?i=a+"/static/geoJson/china.json":-1!==r.indexOf(t)?(o=u._provinceMap[t],i=a+"/static/geoJson/geometryProvince/"+o+".json"):(o=u.cityMap[t],i=void 0==o?a+"/static/geoJson/china.json":a+"/static/geoJson/geometryCounties/"+o+".json"),l.readFileSync(i,"utf8")}var o=r(33),a=r(29),i=r(30),s=r(11),l=r(5),d=r(35),c=r(12),u=r(18),p=r(31),f=(r(32),{renderEcharts:function(e){e.canvas&&(s=e.canvas),o.setCanvasCreator(function(){return r});var t,r=new s(128,128),a={title:{text:"test"},tooltip:{},legend:{data:["test"]},xAxis:{data:["a","b","c","d","f","g"]},yAxis:{},series:[{name:"test",type:"bar",data:[5,20,36,10,10,20]}]};if(e.width=e.width||500,e.height=e.height||500,e.option=e.option||a,e.path=e.path||process.cwd()+"/test.png",e.font&&(r.font=e.font),e.option.animation=!1,e.option.series&&e.option.series[0]&&"map"===e.option.series[0].type){var i=e.option.series[0].mapType,d=n(i);o.registerMap(i,d)}t=o.init(new s(parseInt(e.width,10),parseInt(e.height,10))),t.setOption(e.option);try{l.writeFileSync(e.path,t.getDom().toBuffer()),console.log("Create Img:"+e.path)}catch(e){console.error("Error: Write File failed"+e.message)}},renderKeywordsCloud:function(e){function t(t){var r=e.height||400,n=e.width||400;s.createSVG(n,r).style("border-radius",n+"px").append("g").attr("transform","translate("+n/2+","+r/2+")").selectAll("text").data(t).enter().append("text").style("font-size",function(e){return e.size+"px"}).style("font-family","微软雅黑").style("fill",function(e,t){return y(t)}).attr("text-anchor","middle").attr("transform",function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"}).text(function(e){return e.text});try{var o=new Buffer(s.svgString(),"utf-8"),a=d.sync(o);l.writeFileSync(e.path,a),console.log("Create Img:"+e.path)}catch(e){console.error("Error: Write File failed"+e.message)}}var r=e.height||400,n=e.width||400,o={selector:"#chart",container:'<div id="container"><div id="chart"></div></div>'},s=new p(o);if(0==e.option.data.length){var c=process.cwd(),u=c+"/static/images/default.svg",f=l.readFileSync(u),h=d.sync(f,{width:400,height:400});return void l.writeFileSync(e.path,h)}var g=e.option.data,y=a.scale.category20(),v=a.scale.linear().domain([0,g[0].score/3,g[0].score]).range([10,20,50]);i().size([n,r]).canvas(s.createCanvas()).words(g.map(function(e){return{text:e.keyword,size:v(e.score)}})).padding(2).rotate(function(){return 90*~~(2*Math.random())}).font("Impact").fontSize(function(e){return e.size}).on("end",t).start()}});e.exports=f},function(e,t,r){"use strict";var n=function(){var e={};return e.provinceMap={"新疆维吾尔自治区":"65","西藏自治区":"54","内蒙古自治区":"15","青海省":"63","四川省":"51","黑龙江省":"23","甘肃省":"62","云南省":"53","广西壮族自治区":"45","湖南省":"43","陕西省":"61","广东省":"44","吉林省":"22","河北省":"13","湖北省":"42","贵州省":"52","山东省":"37","江西省":"36","河南省":"41","辽宁省":"21","山西省":"14","安徽省":"34","福建省":"35","浙江省":"33","江苏省":"32","重庆市":"50","宁夏回族自治区":"64","海南省":"46","台湾省":"71","北京市":"11","天津市":"12","上海市":"31","香港特别行政区":"81","澳门特别行政区":"82"},e.cityMap={"北京":"110100","天津":"120100","上海":"310100","重庆":"500100","崇明县":"310200","天门":"429006","仙桃":"429004","潜江":"429005","神农架林区":"429021","铜仁":"522200","毕节":"522400","石家庄":"130100","唐山":"130200","秦皇岛":"130300","邯郸":"130400","邢台":"130500","保定":"130600","张家口":"130700","承德":"130800","沧州":"130900","廊坊":"131000","衡水":"131100","太原":"140100","大同":"140200","阳泉":"140300","长治":"140400","晋城":"140500","朔州":"140600","晋中":"140700","运城":"140800","忻州":"140900","临汾":"141000","吕梁":"141100","呼和浩特":"150100","包头":"150200","乌海":"150300","赤峰":"150400","通辽":"150500","鄂尔多斯":"150600","呼伦贝尔":"150700","巴彦淖尔":"150800","乌兰察布":"150900","兴安盟":"152200","锡林郭勒盟":"152500","阿拉善盟":"152900","沈阳":"210100","大连":"210200","鞍山":"210300","抚顺":"210400","本溪":"210500","丹东":"210600","锦州":"210700","营口":"210800","阜新":"210900","辽阳":"211000","盘锦":"211100","铁岭":"211200","朝阳":"211300","葫芦岛":"211400","长春":"220100","吉林":"220200","四平":"220300","辽源":"220400","通化":"220500","白山":"220600","松原":"220700","白城":"220800","延边朝鲜族":"222400","哈尔滨":"230100","齐齐哈尔":"230200","鸡西":"230300","鹤岗":"230400","双鸭山":"230500","大庆":"230600","伊春":"230700","佳木斯":"230800","七台河":"230900","牡丹江":"231000","黑河":"231100","绥化":"231200","大兴安岭":"232700","南京":"320100","无锡":"320200","徐州":"320300","常州":"320400","苏州":"320500","南通":"320600","连云港":"320700","淮安":"320800","盐城":"320900","扬州":"321000","镇江":"321100","泰州":"321200","宿迁":"321300","杭州":"330100","宁波":"330200","温州":"330300","嘉兴":"330400","湖州":"330500","绍兴":"330600","金华":"330700","衢州":"330800","舟山":"330900","台州":"331000","丽水":"331100","合肥":"340100","芜湖":"340200","蚌埠":"340300","淮南":"340400","马鞍山":"340500","淮北":"340600","铜陵":"340700","安庆":"340800","黄山":"341000","滁州":"341100","阜阳":"341200","宿州":"341300","六安":"341500","亳州":"341600","池州":"341700","宣城":"341800","福州":"350100","厦门":"350200","莆田":"350300","三明":"350400","泉州":"350500","漳州":"350600","南平":"350700","龙岩":"350800","宁德":"350900","南昌":"360100","景德镇":"360200","萍乡":"360300","九江":"360400","新余":"360500","鹰潭":"360600","赣州":"360700","吉安":"360800","宜春":"360900","抚州":"361000","上饶":"361100","济南":"370100","青岛":"370200","淄博":"370300","枣庄":"370400","东营":"370500","烟台":"370600","潍坊":"370700","济宁":"370800","泰安":"370900","威海":"371000","日照":"371100","莱芜":"371200","临沂":"371300","德州":"371400","聊城":"371500","滨州":"371600","菏泽":"371700","郑州":"410100","开封":"410200","洛阳":"410300","平顶山":"410400","安阳":"410500","鹤壁":"410600","新乡":"410700","焦作":"410800","濮阳":"410900","许昌":"411000","漯河":"411100","三门峡":"411200","南阳":"411300","商丘":"411400","信阳":"411500","周口":"411600","驻马店":"411700","省直辖县级行政区划":"469000","武汉":"420100","黄石":"420200","十堰":"420300","宜昌":"420500","襄阳":"420600","鄂州":"420700","荆门":"420800","孝感":"420900","荆州":"421000","黄冈":"421100","咸宁":"421200","随州":"421300","恩施土家族苗族":"422800","长沙":"430100","株洲":"430200","湘潭":"430300","衡阳":"430400","邵阳":"430500","岳阳":"430600","常德":"430700","张家界":"430800","益阳":"430900","郴州":"431000","永州":"431100","怀化":"431200","娄底":"431300","湘西土家族苗族":"433100","广州":"440100","韶关":"440200","深圳":"440300","珠海":"440400","汕头":"440500","佛山":"440600","江门":"440700","湛江":"440800","茂名":"440900","肇庆":"441200","惠州":"441300","梅州":"441400","汕尾":"441500","河源":"441600","阳江":"441700","清远":"441800","东莞":"441900","中山":"442000","潮州":"445100","揭阳":"445200","云浮":"445300","南宁":"450100","柳州":"450200","桂林":"450300","梧州":"450400","北海":"450500","防城港":"450600","钦州":"450700","贵港":"450800","玉林":"450900","百色":"451000","贺州":"451100","河池":"451200","来宾":"451300","崇左":"451400","海口":"460100","三亚":"460200","三沙":"460300","成都":"510100","自贡":"510300","攀枝花":"510400","泸州":"510500","德阳":"510600","绵阳":"510700","广元":"510800","遂宁":"510900","内江":"511000","乐山":"511100","南充":"511300","眉山":"511400","宜宾":"511500","广安":"511600","达州":"511700","雅安":"511800","巴中":"511900","资阳":"512000","阿坝藏族羌族":"513200","甘孜藏族":"513300","凉山彝族":"513400","贵阳":"520100","六盘水":"520200","遵义":"520300","安顺":"520400","黔西南布依族苗族":"522300","黔东南苗族侗族":"522600","黔南布依族苗族":"522700","昆明":"530100","曲靖":"530300","玉溪":"530400","保山":"530500","昭通":"530600","丽江":"530700","普洱":"530800","临沧":"530900","楚雄彝族":"532300","红河哈尼族彝族":"532500","文山壮族苗族":"532600","西双版纳傣族":"532800","大理白族":"532900","德宏傣族景颇族":"533100","怒江傈僳族":"533300","迪庆藏族":"533400","拉萨":"540100","昌都":"542100","山南":"542200","日喀则":"542300","那曲":"542400","阿里":"542500","林芝":"542600","西安":"610100","铜川":"610200","宝鸡":"610300","咸阳":"610400","渭南":"610500","延安":"610600","汉中":"610700","榆林":"610800","安康":"610900","商洛":"611000","兰州":"620100","嘉峪关":"620200","金昌":"620300","白银":"620400","天水":"620500","武威":"620600","张掖":"620700","平凉":"620800","酒泉":"620900","庆阳":"621000","定西":"621100","陇南":"621200","临夏回族":"622900","甘南藏族":"623000","西宁":"630100","海东":"632100","海北藏族":"632200","黄南藏族":"632300","海南藏族":"632500","果洛藏族":"632600","玉树藏族":"632700","海西蒙古族藏族":"632800","银川":"640100","石嘴山":"640200","吴忠":"640300","固原":"640400","中卫":"640500","乌鲁木齐":"650100","克拉玛依":"650200","吐鲁番":"652100","哈密":"652200","昌吉回族":"652300","博尔塔拉蒙古":"652700","巴音郭楞蒙古":"652800","阿克苏":"652900","克孜勒苏柯尔克孜":"653000","喀什":"653100","和田":"653200","伊犁哈萨克":"654000","塔城":"654200","阿勒泰":"654300","阿拉尔":"659002","图木舒克":"659003","五家渠":"659004","石河子":"659001","自治区直辖县级行政区划":"659000","台湾省":"710000","香港特别行政区":"810100","澳门特别行政区":"820000"},e._provinceMap={"新疆":"65","西藏":"54","内蒙古":"15","青海":"63","四川":"51","黑龙江":"23","甘肃":"62","云南":"53","广西":"45","湖南":"43","陕西":"61","广东":"44","吉林":"22","河北":"13","湖北":"42","贵州":"52","山东":"37","江西":"36","河南":"41","辽宁":"21","山西":"14","安徽":"34","福建":"35","浙江":"33","江苏":"32","重庆":"50","宁夏":"64","海南":"46","台湾":"71","北京":"11","天津":"12","上海":"31","香港":"81","澳门":"82"},e}();e.exports=n},function(e,t,r){"use strict";var n=r(7),o={categoryAxisLabelColor:"#333",categoryAxisLineColor:"#333",valueAxisLabelColor:"#333",valueAxisLineColor:"#333",legendLabelColor:"#333"},a=o.categoryAxisLabelColor,i=o.valueAxisLabelColor,s=o.legendLabelColor,l=o.categoryAxisLineColor,d=o.valueAxisLineColor;e.exports={getOption:function(e,t){var r=["#21b6b9","#eba954","#0092ff","#d74e67","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];t=t||{};var o=t,c=o.tooltipData,u=void 0===c?{}:c,p=o.legendData,f=void 0===p?{}:p,h=o.xAxisData,g=void 0===h?{}:h,y=o.yAxisData,v=void 0===y?{}:y,b=o.gridData,m=void 0===b?{}:b,x=o.labelLength,C=void 0===x?8:x,D=o.seriesItemColor,T=void 0===D||D,w=o.seriesData,A={trigger:"axis",axisPointer:{type:"shadow"}},W={x:"center",y:"top",data:[],textStyle:{fontSize:14,color:s}},S={type:"category",name:"",data:[],boundaryGap:[0,.01],splitLine:{show:!0,interval:"auto"},axisTick:{show:!1},axisLine:{lineStyle:{width:2,color:l}},axisLabel:{interval:0,margin:10,textStyle:{fontSize:14,color:a},formatter:function(e){var t=e.length,r="";if(t>C)for(var n=Math.ceil(t/C),o=0;o<n;o++)r+=e.substring(o*C,(o+1)*C)+"\n";else r=e;return r}}},E={type:"value",name:"",axisTick:{show:!1},axisLine:{lineStyle:{width:2,color:d}},axisLabel:{margin:10,textStyle:{fontSize:14,color:i}}},O={top:"8%",bottom:"20%",left:"5%",containLabel:!0},L=[],B={name:"",type:"bar",data:[],barMaxWidth:"40"};return T&&(B.itemStyle={normal:{color:function(e){return["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex%15]}}}),n.extend(!0,A,u),n.extend(!0,W,f),n.extend(!0,O,m),u=A,f=W,m=O,e.length>0&&e.forEach(function(e,t){var r={};w?(n.extend(!0,r,B,w[t]),L.push(r)):(n.extend(!0,r,B),r.name=e.name,r.data=e.data,L.push(r)),f.data.push(e.name),e.data.length>0&&e.data.forEach(function(e){-1===n.inArray(e.name,S.data)&&S.data.push(e.name)})}),"value"===g.type?(n.extend(!0,E,g),g=E):(n.extend(!0,S,g),g=S),"category"===v.type?(n.extend(!0,S,v),v=S):(n.extend(!0,E,v),v=E),{color:r,tooltip:u,legend:f,xAxis:g,yAxis:v,grid:m,series:L}}}},function(e,t,r){"use strict";var n=r(19),o=r(21),a=r(22);e.exports={barChartOption:n,lineChartOption:o,pieChartOption:a}},function(e,t,r){"use strict";(function(e){var t=r(7),n={categoryAxisLabelColor:"#fff",categoryAxisLineColor:"#fff",valueAxisLabelColor:"#fff",valueAxisLineColor:"#fff",legendLabelColor:"#fff"},o=n.categoryAxisLabelColor,a=n.valueAxisLabelColor,i=n.legendLabelColor,s=n.categoryAxisLineColor,l=n.valueAxisLineColor;e.export={getOption:function(e,r){var n=["#21b6b9","#eba954","#0092ff","#d74e67","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];r=r||{};var d={trigger:"axis",axisPointer:{type:"shadow"}},c={x:"center",y:"top",data:[],textStyle:{fontSize:14,color:i}},u={type:"category",name:"",data:[],boundaryGap:!1,splitLine:{show:!0,interval:"auto"},axisTick:{show:!1},axisLine:{lineStyle:{width:2,color:s}},axisLabel:{margin:10,textStyle:{fontSize:14,color:o}}},p={type:"value",name:"",axisTick:{show:!1},axisLine:{lineStyle:{width:2,color:l}},axisLabel:{margin:10,textStyle:{fontSize:14,color:a}}},f={bottom:20,left:120,containLabel:!0},h=r,g=h.tooltipData,y=void 0===g?{}:g,v=h.legendData,b=void 0===v?{}:v,m=h.xAxisData,x=void 0===m?{}:m,C=h.yAxisData,D=void 0===C?{}:C,T=h.gridData,w=void 0===T?{}:T,A=h.seriesData,W=[],S={name:"",type:"line",smooth:!0,data:[]};return t.extend(!0,d,y),t.extend(!0,c,b),t.extend(!0,f,w),y=d,b=c,w=f,e.length>0&&e.forEach(function(e,r){var n={};A?(t.extend(!0,n,S,A[r]),W.push(n)):(t.extend(!0,n,S),n.name=e.name,n.data=e.data,W.push(n)),e.data.length>0&&e.data.forEach(function(e){-1===t.inArray(e.key,u.data)&&u.data.push(e.key)})}),"value"===x.type?(t.extend(!0,p,x),x=p):(t.extend(!0,u,x),x=u),"category"===D.type?(t.extend(!0,u,D),D=u):(t.extend(!0,p,D),D=p),{color:n,tooltip:y,legend:b,xAxis:x,yAxis:D,grid:w,series:W}}}}).call(t,r(10)(e))},function(e,t,r){"use strict";(function(e){var t=r(7),n={legendLabelColor:"#fff"},o=n.legendLabelColor;e.export={getOption:function(e,r){var n=["#21b6b9","#eba954","#0092ff","#d74e67","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"];r=r||{};var a={trigger:"item",formatter:"{a}<br/>{b} : {c} ({d}%)"},i={x:"center",y:"top",data:[],textStyle:{fontSize:14,color:o}},s=r,l=s.tooltipData,d=void 0===l?a:l,c=s.legendData,u=void 0===c?i:c,p=s.pieForEmotion,f=void 0!==p&&p,h=s.seriesData,g=[],y={name:"",type:"pie",radius:["40%","55%"],avoidLabelOverlap:!1,data:[]};return f&&(y.itemStyle={normal:{color:function(e){return"正面"===e.name?"#0092ff":"中性"===e.name?"#eba954":"负面"===e.name?"#d74e67":void 0}}}),t.extend(!0,i,u),u=i,e.length>0&&e.forEach(function(e,r){var n={};h?(t.extend(!0,n,y,h[r]),g.push(n)):(t.extend(!0,n,y),n.name=e.name,n.data=e.data,g.push(n)),e.data.length>0&&e.data.forEach(function(e){u.data.push(e.name)})}),{color:n,tooltip:d,legend:u,series:g}}}}).call(t,r(10)(e))},function(e,t,r){"use strict";var n={constructor:function(e,t,r,n,o,a,i,s){this.type=e,this.title=t,this.subTitle=r,this.author=n,this.issue=a,this.outline=o,this.briefingBody=i,this.summary=s},getType:function(){return this.type},setType:function(e){this.type=e},getTitle:function(){return this.title},setTitle:function(e){this.title=e},getSubTitle:function(){return this.subTitle},setSubTitle:function(e){this.subTitle=e},getAuthor:function(){return this.author},setAuthor:function(e){this.author=e},getIssue:function(){return this.issue},setIssue:function(e){this.issue=e},getOutline:function(){return this.outline},setOutline:function(e){this.outline=e},getBriefingBody:function(){return this.briefingBody},setBriefingBody:function(e){this.briefingBody=e},getSummary:function(){return this.summary},setSummary:function(e){this.summary=e}};e.exports=n},function(e,t,r){"use strict";var n={constructor:function(e){this.briefingCells=e},getBriefingCells:function(){return this.briefingCells},setBriefingCells:function(e){this.briefingCells=e}};e.exports=n},function(e,t,r){"use strict";var n=r(23),o=r(26),a=(r(24),{briefing:n,buildType:function(e){this.briefing.type=e},buildTitle:function(e){this.briefing.title=e},buildSubTitle:function(e){this.briefing.subTitle=e},buildAuthor:function(e){this.briefing.author=e},buildOutline:function(e){this.briefing.outline=e},buildIssue:function(e){this.briefing.issue=e},buildBriefingBody:function(e){this.briefing.briefingBody=e},buildSummary:function(e){this.briefing.summary=e},getBriefing:function(){return this.briefing}}),i={briefingBuilder:a,createBriefing:function(e){var t=this.briefingBuilder;t.buildType(e.type),t.buildTitle(e.title),t.buildSubTitle(e.subTitle),t.buildAuthor(e.author),t.buildOutline(e.outline),t.buildIssue(e.issue),t.buildBriefingBody(e.briefingBody),t.buildSummary(e.summary)}},s={briefingCell:o,buildLevel:function(e){this.briefingCell.level=e},buildTitle:function(e){this.briefingCell.title=e},buildImageUrl:function(e){this.briefingCell.imageUrl=e},buildDescription:function(e){this.briefingCell.description=e},buildChildren:function(e){this.briefingCell.children=e},buildChartType:function(e){this.briefingCell.chartType=e},buildChartId:function(e){this.briefingCell.chartId=e},buildMethod:function(e){this.briefingCell.method=e},getBriefingCell:function(){return this.briefingCell}},l={briefingCellBuilder:s,createBriefingCell:function(e){var t=this.briefingCellBuilder;t.buildLevel(e.level),t.buildTitle(e.title),t.buildImageUrl(e.imageUrl),t.buildDescription(e.description),t.buildChildren(e.children),t.buildChartType(e.chartType),t.buildChartId(e.chartId),t.buildMethod(e.method)}},d={briefingBuilder:a,briefingDirector:i,briefingCellBuilder:s,briefingCellDirector:l};e.exports=d},function(e,t,r){"use strict";var n={constructor:function(e,t,r,n,o,a,i,s,l){this.level=e,this.title=t,this.imageUrl=r,this.option=n,this.description=o,this.children=a,this.chartType=i,this.chartId=s,this.method=l},getLevel:function(){return this.level},setLevel:function(e){this.level=e},getTitle:function(){return this.title},setTitle:function(e){this.title=e},getImageUrl:function(){return this.imageUrl},setImageUrl:function(e){this.imageUrl=e},getOption:function(){return this.option},setOption:function(e){this.option=e},getDescription:function(){return this.description},setDescription:function(e){this.description=e},getChildren:function(){return this.children},setChildren:function(e){this.children=e},getChartType:function(){return this.chartType},setChartType:function(e){this.chartType=e},getChartId:function(){return this.chartId},setChartId:function(e){this.chartId=e},getMethod:function(){return this.method},setMethod:function(e){this.method=e}};e.exports=n},function(e,t,r){"use strict";var n=r(2),o=r(4),a=r(1),i=r(0),s=r(9),l=r(6),d=r(8),c=r(3),u={getBriefingTitle:function(e){var t="",r="";return"MONTHLY"==e.type?(r=l.formatDate(l.parseDate(e.startDate),"yyyy年MM月"),t="月报"+r):"WEEKLY"==e.type&&(r=l.formatDate(l.parseDate(e.startDate),"yyyy年MM月dd日"),t="周报"+r),t},getBriefingSubTitle:function(e){return""},getBriefingIssue:function(e){return""},getBriefingAuthor:function(e){return""},getBriefingOutline:function(e){console.log("get briefing outline");var t="",r=!1,o="";"MONTHLY"===e.type?o=i.webserviceUrl+"/description/monthLyOutline/":"WEEKLY"===e.type&&(o=i.webserviceUrl+"/description/weeklyOutline/");var l={date:{startDate:e.startDate,endDate:e.endDate},keyword:{mustWord:e.mustWord,shouldWord:e.shouldWord,mustNotWord:e.mustNotWord}};for(console.log("getBriefingOutline",JSON.stringify(l)),n({url:o,method:"post",json:!0,headers:c.getRequestHeader(),body:l},function(n,o,a){if(!n&&200==o.statusCode){r=!0;var i=0,l=0,d=0,c="",u="";"MONTHLY"===e.type?(l=a.monthCount,d=a.mom,u="月"):"WEEKLY"===e.type&&(l=a.weekCount,d=a.wow,u="周"),l>0&&(i=l),c=d>0?"增加"+d.toFixed(2)+"％":"减少"+d.toFixed(2)+"％";var p="",f=[],h=[];e.mustWord&&(f=e.mustWord.split("@")),e.shouldWord&&(h=e.shouldWord.split("@")),f.length>2&&(f=f.slice(0,2)),h.length>2&&(h=h.slice(0,2)),p=f.join("、")+"、"+h.join("、"),p=p.substring(0,p.length);var g="",y="";a.maxType&&a.maxType.length>0&&(a.maxType.forEach(function(e){a.compare.forEach(function(t){e.key===t.key&&(y=t.value>0?"增加"+t.value.toFixed(2)+"％":"减少"+t.value.toFixed(2)+"％",g+="<span class='describe-redText'>"+s.resetArticleTypeName(e.key)+"（"+e.value+"）</span>条,同比上"+u+"<span class='describe-redText'>"+y+"</span>，")})}),g=g.substring(0,g.length-1));var v="";a.maxSite&&a.maxSite.length>0&&(v="其中较为活跃的站点有",a.maxSite.forEach(function(e,t){t<3&&(v+="<span class='describe-redText'>"+e.key+"（"+e.value+"）</span>条，")}),v=v.substring(0,v.length-1)),t="<div class='describe-text'>本"+u+"共抓取数据<span class='describe-redText'>"+i+"</span>条，同比上"+u+"<span class='describe-redText'>"+c+"</span>，本"+u+"共抓取<span class='describe-redText'>"+p+"</span>相关"+g+"，"+v+"</div>"}});!r;)a.runLoopOnce();return t},getBriefingSummary:function(e){return""},getArticleTypeChart:function(e){var t={},r=!1,l={groupName:"type",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},d=i.webserviceUrl+"/es/filterAndGroupBy.json?"+o.stringify(l);for(n({url:d,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(!e&&200==n.statusCode){console.log("getArticleTypeChart http request return!"),r=!0;var a=0,i=[],l="";if(o.length>0){var d=!0,c=!1,u=void 0;try{for(var p,f=o[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var h=p.value;a+=h.value;var g={};g.name=s.resetArticleTypeName(h.key),g.value=h.value,i.push(g)}}catch(e){c=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}}var y={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{},series:[{name:"媒体类型",type:"pie",radius:["40%","55%"],label:{normal:{show:!0,textStyle:{fontSize:20}}},data:i}]};if(o.length>0){var v="";i.forEach(function(e,t){t<3&&(v+="<span class='describe-redText'>"+e.name+"类媒体发现报道了"+e.value+"次，所占比例"+(100*e.value/a).toFixed(2)+"%</span>；")}),v=v.substring(0,v.length-1)+"。",l="<div class='describe-text'>根据互联网实时监控的所有抓取的数据按媒体报道载体分析，一共具有媒体报道<span class='describe-redText'>"+a+"</span>次，"+v+"</div>"}else l="暂无相关数据";t.option=y,t.description=l}});!r;)a.runLoopOnce();return t},getAccidentAreaChart:function(e){var t={},r=!1,o={date:{startDate:e.startDate,endDate:e.endDate},page:{orders:[{direction:"DESC",orderBy:"count"}]},types:["province"]},s=i.webserviceUrl+"/accident/aggByTypes";for(n({url:s,method:"post",json:!0,headers:c.getRequestHeader(),body:o},function(e,n,o){if(e||200!=n.statusCode)console.log("get getAccidentAreaChart data error");else{console.log("getAccidentAreaChart http request return!"),r=!0;var a=0,i=[],s=[],l="";o.length>0&&(o=o.sort(function(e,t){return t.count-e.count}),o.forEach(function(e,t){a+=e.count,t<6&&(i.push(e.count),s.push(e.id))}));var c={legend:{},yAxis:{data:s,axisLabel:{textStyle:{fontWeight:700,fontSize:20}}},xAxis:{axisLabel:{textStyle:{fontWeight:700,fontSize:20}}},series:[{name:"事故起数",type:"bar",data:i,barMaxWidth:45,itemStyle:{normal:{color:function(e){return["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex%15]}}}}]};if(o.length>0){var u="";o.forEach(function(e,t){t<6&&(u+="<span class='describe-redText'>"+e.id+e.count+"("+(100*e.count/a).toFixed(2)+"%)</span>、")}),u=u.substring(0,u.length-1)+"。";var p=s.join(","),f=d.getProvinceLocality(p),h="";f.forEach(function(e){h+="以<span class='describe-redText'>"+e.value+"</span>为代表的<span class='describe-redText'>"+e.key+"</span>地区,"}),h=h.substring(0,h.length-1)+"事故发生率较高",i.reverse(),s.reverse(),l="<div class='describe-text'>根据互联网抓取的数据，对本月事故情况进行分析，共发生事故<span class='describe-redText'>"+a+"</span>起，其中"+h+"。发生较多的省份为"+u+"</div>"}else l="暂无相关数据";t.option=c,t.description=l}});!r;)a.runLoopOnce();return t},getArticleTrendChart:function(e){var t={},r=!1,u={dateType:"day",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.trendStartData,e_date:e.endDate,articleType:"article"},p=i.webserviceUrl+"/es/filterAndGroupByTime.json?"+o.stringify(u);for(n({url:p,method:"get",json:!0,headers:c.getRequestHeader()},function(n,o,a){if(n||200!=o.statusCode)console.log("get getArticleTrendChart data error");else{console.log("getArticleTrendChart http request return!"),a=a.article,r=!0;var i,c,p,f,h=l.parseDate(e.trendStartData).getTime(),g=l.parseDate(e.startDate).getTime(),y=g,v=l.parseDate(e.endDate).getTime(),b="",m=0,x=0,C=[],D=[],T=[],w=[],A=[],W=0,S=0,E=0,O=0,L=[];"MONTHLY"==e.type?(i=l.parseDate(u.s_date),c=l.addDate(i,"M",1),p=l.formatDate(i,"yyyy年MM月"),f=l.formatDate(c,"yyyy年MM月")):"WEEKLY"==e.type&&(i=l.parseDate(u.s_date),c=l.addDate(i,"d",7),p=l.formatDate(i,"上周"),f=l.formatDate(c,"本周")),L.push(p),L.push(f);var B=[],M=[],k="";if(a.length>0){var F=!0,j=!1,N=void 0;try{for(var q,H=a[Symbol.iterator]();!(F=(q=H.next()).done);F=!0){var I=q.value,_=l.parseDate(I.key),P=_.getTime();"MONTHLY"==e.type?k=l.formatDate(_,"yyyy-MM"):"WEEKLY"==e.type&&(k=s.resetDate(_.getDay())),P>=h&&P<g?("MONTHLY"==e.type?w.push(_.getDate()):"WEEKLY"==e.type&&w.push(k),C.push(I.value),B.push(I)):P>=y&&P<v&&("MONTHLY"==e.type?A.push(_.getDate()):"WEEKLY"==e.type&&A.push(k),D.push(I.value),M.push(I))}}catch(e){j=!0,N=e}finally{try{!F&&H.return&&H.return()}finally{if(j)throw N}}T=w.length>A.length?w:A,W=C.indexOf(Math.max.apply(Math,C)),S=C.indexOf(Math.min.apply(Math,C)),E=D.indexOf(Math.max.apply(Math,D)),O=D.indexOf(Math.min.apply(Math,D)),C.forEach(function(e){m+=e}),D.forEach(function(e){x+=e})}var U={tooltip:{trigger:"axis"},legend:{x:"right",y:"middle",orient:"vertical",data:L},grid:{left:"4%",right:"150px",bottom:"3%",containLabel:!0},color:["#e7ba09","#30a8dd"],xAxis:{type:"category",data:T,axisLabel:{textStyle:{fontWeight:700,fontSize:16}}},yAxis:{type:"value",axisLabel:{interval:0,textStyle:{fontWeight:600,fontSize:18}}},series:[{name:p,type:"line",data:C},{name:f,type:"line",data:D}]};if(a.length>0){var R="",Y="",z="",K="",J="",G="",$="",X="",V="",Q="",Z="",ee="",te="",re="";R=d.getTrendOfOpinion(B,M)?"波动更大,个别话题引起舆情热度较大起伏":"更平稳一些,但是个别话题引起舆情热度较大起伏","MONTHLY"==e.type?(Y="月",K=parseInt(c.getMonth()+1)+Y,z=parseInt(i.getMonth()+1)+Y,J=c.getFullYear()+"-"+parseInt(c.getMonth()+1)+"-"+parseInt(E+1),$=parseInt(E+1)+"日",X=D[E],V=parseInt(O+1)+"日",Q=D[O],Z=parseInt(W+1)+"日",ee=C[W],te=parseInt(S+1)+"日",re=C[S]):"WEEKLY"==e.type&&(Y="周",K="本"+Y,z="上"+Y,J=a[E].key,$=T[E],X=D[E],V=T[O],Q=D[O],Z=T[W],ee=C[W],te=T[S],re=C[S]);var ne='从舆情热度趋势来看, <span class="describe-redText">'+K+'</span>的舆情热度与<span class="describe-redText">'+z+"</span>相比"+R+"。",oe=l.formatDate(l.parseDate(J),"yyyy-MM-dd"),ae=l.formatDate(l.addDate(l.parseDate(oe),"d",1),"yyyy-MM-dd"),ie=d.getHotArticle(e,oe,ae);ie.key&&(G='<span class="describe-redText">'+$+'</span>，<span class="describe-redText">＂'+ie.key+'＂</span>话题产生<span class="describe-redText">'+ie.value+"</span>篇相关报道，促使当日出现本"+Y+"的舆情高峰。"),b='<div class="describe-text">'+ne+'<span class="describe-redText">'+K+'</span>中，共抓取互联网数据<span class="describe-redText">'+x+'</span>条，其中<span class="describe-redText">'+$+'</span>热度最高，共有数据<span class="describe-redText">'+X+"</span>条。"+G+'<span class="describe-redText">'+V+'</span>最低，共有数据<span class="describe-redText">'+Q+'</span>条。环比<span class="describe-redText">'+z+'</span>，共抓取互联网数据<span class="describe-redText">'+m+'</span>条，其中<span class="describe-redText">'+Z+'</span>热度最高，共有数据<span class="describe-redText">'+ee+'</span>条。<span class="describe-redText">'+te+'</span>日最低，共有数据<span class="describe-redText">'+re+"</span>条。</div>"}else b="暂无相关数据";t.option=U,t.description=b}});!r;)a.runLoopOnce();return t},getArticleHotPointChart:function(e){var t={},r=!1,o={date:{startDate:e.startDate,endDate:e.endDate},filed:"",keyword:{mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord},page:{limit:6,page:1},searchKv:[{key:"title.cn",value:"安徽"}],type:["news"]},s=i.webserviceUrl+"/es/titleTimeAxis";for(n({url:s,method:"post",json:!0,headers:c.getRequestHeader(),body:o},function(n,o,a){if(n||200!=o.statusCode)console.log("get getArticleHotPointChart data error");else{console.log("getArticleHotPointChart http request return!"),r=!0,a=a.content;var i=[],s=[],l="";if(a.length>0){a.length>6&&(a=a.slice(0,6)),a=a.sort(function(e,t){return e.docTotal-t.docTotal});var d=!0,c=!1,u=void 0;try{for(var p,f=a[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var h=p.value;i.push(h.docTotal),h.title.length>18?h.label=h.title.substring(0,18)+"...":h.label=h.title,s.push(h.label)}}catch(e){c=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}}var g={yAxis:{type:"category",data:s,axisLabel:{textStyle:{fontWeight:700,fontSize:18}}},grid:{left:"10",right:"30",bottom:"10",top:"10",containLabel:!0},xAxis:{type:"value",axisLabel:{textStyle:{fontWeight:700,fontSize:18}}},series:[{name:"舆论热点",type:"bar",data:i,barMaxWidth:45,itemStyle:{normal:{color:function(e){return["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex%15]}}}}]};if(a.length>0){var y="";"MONTHLY"===e.type?y="本月":"WEEKLY"===e.type&&(y="本周");var v="";a=a.reverse(),a.forEach(function(e,t){e.title.length>30&&(e.title=e.title.substring(0,30)+"..."),t<3&&(v+='<span class="describe-redText">“'+e.title+"” ("+e.docTotal+")</span>、")}),v=v.substring(0,v.length-1),l='<div class="describe-text">'+y+"媒体报道情况，从其具体内容方面也可以发现，主要话题集中在"+v+"等几个方面。</div>"}else l="暂无相关数据";t.option=g,t.description=l}});!r;)a.runLoopOnce();return t},getNewsEmotionPieChart:function(e){var t={},r=!1,l={groupName:"nlp.sentiment.label",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},d=i.webserviceUrl+"/news/filterAndGroupBy.json?"+o.stringify(l);for(n({url:d,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(e||200!=n.statusCode)console.log("get getNewsEmotionPieChart data error");else{console.log("getNewsEmotionPieChart http request return!"),r=!0;var a=0,i=[],l=[],d="";if(o.length>0){var c=!0,u=!1,p=void 0;try{for(var f,h=o[Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var g=f.value,y={};y.name=s.resetEmotionTypeName(g.key),y.value=g.value,i.push(y),l.push(y.name)}}catch(e){u=!0,p=e}finally{try{!c&&h.return&&h.return()}finally{if(u)throw p}}}var v={title:{text:"情感分析",left:"center",top:"center",textStyle:{fontSize:20,fontWeight:600}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{x:"right",textStyle:{fontSize:15,fontWeight:500},data:l},series:[{name:"情感类型",type:"pie",radius:["40%","60%"],label:{normal:{show:!1,textStyle:{fontSize:20}},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:i}]};if(o.length>0){var b=!0,m=!1,x=void 0;try{for(var C,D=i[Symbol.iterator]();!(b=(C=D.next()).done);b=!0){var g=C.value;a+=g.value}}catch(e){m=!0,x=e}finally{try{!b&&D.return&&D.return()}finally{if(m)throw x}}var T="";i.forEach(function(e,t){0==t&&(T+="<span class='describe-redText'>"+e.name+"</span>情感最多有<span class='describe-redText'>"+e.value+"("+(100*e.value/a).toFixed(2)+"%)</span>，"),t>0&&(T+="<span class='describe-redText'>"+e.name+e.value+"("+(100*e.value/a).toFixed(2)+"%)</span>，")}),T=T.substring(0,T.length-1),d="<div class='describe-text'>根据互联网抓取的数据，对数据情感进行分析，"+T+"。</div>"}else d="暂无相关数据";t.option=v,t.description=d}});!r;)a.runLoopOnce();return t},getMediaBarChart:function(e){var t={},r=!1,s={groupName:"site",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate,articleType:"news"},l=i.webserviceUrl+"/es/filterAndGroupBy.json?"+o.stringify(s);for(n({url:l,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(e||200!=n.statusCode)console.log("get getMediaBarChart data error");else{console.log("getMediaBarChart http request return!"),r=!0;var a=[],i=[],s="";if(o.length>0){o=o.sort(function(e,t){return t.value-e.value});var l=!0,d=!1,c=void 0;try{for(var u,p=o[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var f=u.value,h={};h.name=f.key,h.value=f.value,a.push(h),i.push(f.key)}}catch(e){d=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw c}}}var g={legend:{},grid:{bottom:120},yAxis:{axisLabel:{textStyle:{fontWeight:700,fontSize:18}}},xAxis:{data:i,axisLabel:{interval:0,rotate:35,textStyle:{fontWeight:700,fontSize:18}}},series:[{name:"媒体名称",type:"bar",data:a,barMaxWidth:45,itemStyle:{normal:{color:function(e){return["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex%15]}}}}]};if(o.length>0){var y="";a.forEach(function(e,t){t<4&&(y+="<span class='describe-redText'>"+e.name+"("+e.value+")</span>、")}),y=y.substring(0,y.length-1),s="<div class='describe-text'>根据互联网抓取的数据，主流媒体报道较多的是"+y+"等。</div>"}else s="暂无相关数据";t.option=g,t.description=s}});!r;)a.runLoopOnce();return t},getArticleHotKeywordsChart:function(e){var t={},r=!1,s={limit:50,mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},l=i.webserviceUrl+"/es/hotWords.json?"+o.stringify(s);for(console.log("getArticleHotKeywordsChart",l),n({url:l,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(e||200!=n.statusCode)console.log("get getArticleHotKeywordsChart data error");else{console.log("getArticleHotKeywordsChart http request return!"),r=!0;var a=[],i="";if(o.length>0){var s=!0,l=!1,d=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var p=c.value,f={};f.keyword=p.key,f.score=p.value,a.push(f)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}var h={data:a};if(o.length>0){var g="";o.forEach(function(e,t){t<5&&(g+="<span class='describe-redText'>"+e.key+"("+e.value+")</span>、")}),g=g.substring(0,g.length-1),i="<div class='describe-text'>根据互联网抓取的数据，热点关键词词频较高的是"+g+"等。</div>"}else i="暂无相关数据";t.option=h,t.description=i}});!r;)a.runLoopOnce();return t},getAccidentTable:function(e){var t={},r=!1,s={};s.shouldWord="",s.mustWord="安徽@煤矿@事故",s.mustNotWord="";var l={groupName:"title.raw",mustWord:s.mustWord,mustNotWord:s.mustNotWord,shouldWord:s.shouldWord,s_date:e.startDate,e_date:e.endDate,type:"title",articleType:"news"},d=i.webserviceUrl+"/es/filterAndGroupBy.json?"+o.stringify(l);for(n({url:d,method:"get",json:!0,headers:c.getRequestHeader()},function(n,o,a){if(n||200!=o.statusCode)console.log("get getAccidentTable data error");else{console.log("getAccidentTable http request return!"),r=!0;var i=[],s="";a.length>0&&a.forEach(function(e,t){e.index=t+1,e.title=e.key,e.count=e.value,i.push(e)});var l={data:i};if(a.length>0){var d="";"MONTHLY"===e.type?d="本月":"WEEKLY"===e.type&&(d="本周");var c="";a.forEach(function(e,t){e.key.length>30&&(e.key=e.key.substring(0,30)+"..."),t<3&&(c+='<span class="describe-redText">“'+e.key+"” ("+e.value+")</span>、")}),c=c.substring(0,c.length-1),s='<div class="describe-text">'+d+"媒体报道情况，从其具体内容方面也可以发现，主要话题集中在"+c+"等几个方面。</div>"}else s="暂无相关数据";t.option=l,t.description=s}});!r;)a.runLoopOnce();return t}};e.exports=u},function(e,t,r){"use strict";var n=r(0),o=r(9),a=r(2),i=r(4),s=r(1),l=r(6),d=r(8),c=r(3),u=r(20),p={getBriefingTitle:function(e){return e.name},getBriefingSubTitle:function(e){return""},getBriefingIssue:function(e){return""},getBriefingOutline:function(e){return""},getBriefingSummary:function(e){return""},getSpecialSummarize:function(e){var t={},r=!1,i="",l={},d=n.webserviceUrl+"/description/specialOutline/",u={date:{startDate:e.startDate,endDate:e.endDate},keyword:{mustWord:e.mustWord,shouldWord:e.shouldWord,mustNotWord:e.mustNotWord}};for(a({url:d,method:"post",json:!0,headers:c.getRequestHeader(),body:u},function(t,n,a){if(!t&&200==n.statusCode){r=!0;var s="",l=[],d=[];e.mustWord&&(l=e.mustWord.split("@")),e.shouldWord&&(d=e.shouldWord.split("@")),l.length>2&&(l=l.slice(0,2)),d.length>2&&(d=d.slice(0,2)),s=l.join("、")+"、"+d.join("、"),s=s.substring(0,s.length);var c=0;a.monthCount>0&&(c=a.monthCount);var u="",p="",f="";a.maxType.length>0&&a.maxType.forEach(function(e,t){t<3&&(u+="<span class='describe-redText'>"+o.resetArticleTypeName(e.key)+"（"+e.value+"）</span>条、")}),u=u.substring(0,u.length-1),a.maxSite.length>0&&a.maxSite.forEach(function(e,t){t<3&&(p+="<span class='describe-redText'>"+e.key+"（"+e.value+"）</span>条、")}),p=p.substring(0,p.length-1),a.maxTitle.length>0&&a.maxTitle.forEach(function(e,t){t<3&&(f+="以<span class='describe-redText'>“"+e.key+"”标题的报道具有（"+e.value+"）</span>条、")}),f=f.substring(0,f.length-1),i="<div class='describe-text'><div class='paragraph'>根据以<span class='describe-redText'>“"+s+"”</span>等关键字的进行互联网监控，从<span class='describe-redText'>"+e.startDate+"</span>至<span class='describe-redText'>"+e.endDate+"</span>，对以<span class='describe-redText'>“"+e.name+"”</span>为主题进行数据爬取，监控发现对该主题进行报道具有<span class='describe-redText'>"+c+"</span>条，其中包含"+u+"</span>。根据报道数量排序，对该主题报道最多的为"+p+"。</div><div class='paragraph'>对该主题，媒体采用不同的标题方式进行报道，包括"+f+"。</div><div class='paragraph'></div></div>"}});!r;)s.runLoopOnce();return t.description=i,t.option=l,t},getArticleTypeChart:function(e){var t={},r=!1,l={groupName:"type",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},d=n.webserviceUrl+"/es/filterAndGroupBy.json?"+i.stringify(l);for(a({url:d,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,a){if(!e&&200==n.statusCode){console.log("getArticleTypeChart http request return!"),r=!0;var i=0,s=[],l="";if(a.length>0){var d=!0,c=!1,u=void 0;try{for(var p,f=a[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var h=p.value;i+=h.value;var g={};g.name=o.resetArticleTypeName(h.key),g.value=h.value,s.push(g)}}catch(e){c=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(c)throw u}}}var y={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{},series:[{name:"媒体类型",type:"pie",radius:["40%","55%"],label:{normal:{show:!0,textStyle:{fontSize:20}}},data:s}]};if(a.length>0){var v="";s.forEach(function(e,t){t<3&&(v+="<span class='describe-redText'>"+e.name+e.value+"("+(100*e.value/i).toFixed(2)+"%)</span>、")}),v=v.substring(0,v.length-1)+"。",l="<div class='describe-text'>根据互联网抓取的数据，对数据载体进行分析，共抓取数据<span class='describe-redText'>"+i+"</span>条，其中排名前三的为"+v+"</div>"}else l="暂无相关数据";t.option=y,t.description=l}});!r;)s.runLoopOnce();return t},getMediaBarChart:function(e){var t={},r=!1,o={groupName:"site",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},l=n.webserviceUrl+"/news/filterAndGroupBy.json?"+i.stringify(o);for(a({url:l,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(e||200!=n.statusCode)console.log("get getMediaBarChart data error");else{console.log("getMediaBarChart http request return!"),r=!0;var a=[],i=[],s="";if(o.length>0){o=o.sort(function(e,t){return t.value-e.value});var l=!0,d=!1,c=void 0;try{for(var u,p=o[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var f=u.value,h={};h.name=f.key,h.value=f.value,a.push(h),i.push(f.key)}}catch(e){d=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw c}}}var g={legend:{},grid:{bottom:120},yAxis:{axisLabel:{textStyle:{fontWeight:700,fontSize:18}}},xAxis:{data:i,axisLabel:{interval:0,rotate:35,textStyle:{fontWeight:700,fontSize:18}}},series:[{name:"媒体名称",type:"bar",data:a,barMaxWidth:45,itemStyle:{normal:{color:function(e){return["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex%15]}}}}]};if(o.length>0){var y="";a.forEach(function(e,t){t<4&&(y+="<span class='describe-redText'>"+e.name+"("+e.value+")</span>、")}),y=y.substring(0,y.length-1),s="<div class='describe-text'>根据互联网抓取的数据，主流媒体报道较多的是"+y+"等。</div>"}else s="暂无相关数据";t.option=g,t.description=s}});!r;)s.runLoopOnce();return t},getArticleTrendChart:function(e){var t={},r=!1,o={dateType:"day",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate,articleType:"article"},u=n.webserviceUrl+"/es/filterAndGroupByTime.json?"+i.stringify(o);for(a({url:u,method:"get",json:!0,headers:c.getRequestHeader()},function(n,o,a){if(n||200!=o.statusCode)console.log("get getArticleTrendChart data error");else{console.log("getArticleTrendChart http request return!"),r=!0,a=a.article;var i=0,s=[],c=[],u=0,p="",f=0,h="",g=[],y="";if("SPECIAL"==e.type&&a.length>0){g.push("與情数目");var v=!0,b=!1,m=void 0;try{for(var x,C=a[Symbol.iterator]();!(v=(x=C.next()).done);v=!0){var D=x.value,T=l.parseDate(D.key),w=l.formatDate(T,"yyyy-MM-dd");c.push(w),s.push(D.value)}}catch(e){b=!0,m=e}finally{try{!v&&C.return&&C.return()}finally{if(b)throw m}}u=s.indexOf(Math.max.apply(Math,s)),p=c[u],f=s.indexOf(Math.min.apply(Math,s)),h=c[f],s.forEach(function(e){i+=e})}var A={tooltip:{trigger:"axis"},legend:{x:"right",y:"middle",orient:"vertical",data:g},grid:{left:"4%",right:"150px",bottom:"3%",containLabel:!0},color:["#e7ba09","#30a8dd"],xAxis:{type:"category",boundaryGap:!1,data:c,axisLabel:{textStyle:{fontWeight:700,fontSize:16}}},yAxis:{type:"value",axisLabel:{interval:0,textStyle:{fontWeight:600,fontSize:18}}},series:[{name:"與情数目",type:"line",data:s}]};if(a.length>0){var W=l.formatDate(l.parseDate(p),"yyyy-MM-dd"),S=l.formatDate(l.addDate(l.parseDate(W),"d",1),"yyyy-MM-dd"),E=d.getHotArticle(e,W,S),O="";E.key&&(O='<span class="describe-redText">'+p+'</span>日，<span class="describe-redText">＂'+E.key+'＂</span>话题产生<span class="describe-redText">'+E.value+"</span>篇相关报道，促使当日出现本月的舆情高峰。"),y='<div class="describe-text">根据最新舆情分析, 共抓取互联网数据<span class="describe-redText">'+i+'</span>条，其中<span class="describe-redText">'+p+'</span>日热度最高，共有数据<span class="describe-redText">'+s[u]+"</span>条。"+O+'<span class="describe-redText">'+h+'</span>日最低，共有数据<span class="describe-redText">'+s[f]+"</span>条。</div>"}else y="暂无相关数据";t.option=A,t.description=y}});!r;)s.runLoopOnce();return t},getArticleHotPointChart:function(e){var t={},r=!1,i={date:{startDate:e.startDate,endDate:e.endDate},filed:"",keyword:{mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord},page:{limit:6,page:1},searchKv:[{key:"title.cn",value:"安徽"}],type:["news"]},l=n.webserviceUrl+"/es/titleTimeAxis";for(a({url:l,method:"post",json:!0,headers:c.getRequestHeader(),body:i},function(n,a,i){if(n||200!=a.statusCode)console.log("get getArticleHotPointChart data error");else{console.log("getArticleHotPointChart http request return!"),r=!0,i=i.content,i=i.reverse();var s="",l=[],d={labelLength:20,legendData:{show:!1},gridData:{top:10,bottom:20},xAxisData:{type:"value",axisLabel:{textStyle:{fontWeight:700,fontSize:20}}},yAxisData:{type:"category",axisLabel:{textStyle:{fontWeight:700,fontSize:20}}}},c={data:[]};c.name="舆论热点",i.length>0&&i.forEach(function(e){var t={};t.name=e.title,t.value=e.docTotal,c.data.push(t)}),l.push(c);var p=u.barChartOption.getOption(l,d),f=o.replaceLabelLength(p,25);if(i.length>0){var h="";"MONTHLY"===e.type?h="本月":"WEEKLY"===e.type&&(h="本周");var g="";i=i.reverse(),i.forEach(function(e,t){e.title.length>30&&(e.title=e.title.substring(0,30)+"..."),t<3&&(g+='<span class="describe-redText">“'+e.title+"” ("+e.docTotal+")</span>、")}),g=g.substring(0,g.length-1),s='<div class="describe-text">'+h+"媒体报道情况，从其具体内容方面也可以发现，主要话题集中在"+g+"等几个方面。</div>"}else s="暂无相关数据";t.option=f,t.optionObj=p,t.description=s}});!r;)s.runLoopOnce();return t},getHotAuthorChart:function(e){var t={},r=!1,o={groupName:"author",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},l=n.webserviceUrl+"/es/filterAndGroupBy.json?"+i.stringify(o);for(a({url:l,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(e||200!=n.statusCode)console.log("get getHotAuthorChart data error");else{console.log("getHotAuthorChart http request return!"),r=!0;var a=[],i=[],s="";if(o.length>0){o=o.sort(function(e,t){return t.value-e.value});var l=!0,d=!1,c=void 0;try{for(var u,p=o[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var f=u.value;f.key&&""!==f.key&&(a.push(f.value),f.key.length>10&&(f.key=f.key.substring(0,10)+"..."),i.push(f.key))}}catch(e){d=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw c}}}var h={grid:{left:20,right:30,bottom:80,top:20,containLabel:!0},yAxis:{axisLabel:{textStyle:{fontWeight:700,fontSize:20}}},xAxis:{data:i,axisLabel:{interval:0,rotate:35,textStyle:{fontWeight:700,fontSize:20}}},series:[{name:"舆论热点",type:"bar",data:a,barMaxWidth:45,itemStyle:{normal:{color:function(e){return["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"][e.dataIndex%15]}}}}]};if(o.length>0){var g="";o.forEach(function(e,t){t<5&&(g+="<span class='describe-redText'>"+e.key+"("+e.value+")</span>、")});var y=o.length>5?5:o.length;g=g.substring(0,g.length-1),s="<div class='describe-text'>参与话题讨论的网民中，讨论最为激烈的前<span class='describe-redText'>"+y+"</span>名网民分别为"+g+"。</div>"}else s="暂无相关数据";t.option=h,t.description=s}});!r;)s.runLoopOnce();return t},getFocusPeopleMapChart:function(e){var t={},r=!1,o={groupName:"area",mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},l=n.webserviceUrl+"/es/filterAndGroupBy.json?"+i.stringify(o);for(a({url:l,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(e||200!=n.statusCode)console.log("get getFocusPeopleMapChart data error");else{console.log("getFocusPeopleMapChart http request return!"),r=!0;var a=10,i=[],s="";if(o.length>0){var l=!0,d=!1,c=void 0;try{for(var u,p=o[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var f=u.value,h={};h.name=f.key,h.value=f.value,i.push(h)}}catch(e){d=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw c}}i.sort(function(e,t){return t.value-e.value}),i.length>0&&(a=i[0].value)}var g={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}"},visualMap:{min:0,max:a,left:"left",top:"bottom",text:["高","低"],calculable:!0,inRange:{color:["#B7EEEB","#FEFDC7","#FCC171","#F27449","#DB3B29"]}},series:[{name:"关注人数",type:"map",mapType:"china",label:{normal:{show:!0}},data:i}]};if(o.length>0){var y="";i.forEach(function(e,t){t<3&&(y+='<span class="describe-redText">“'+e.name+"” ("+e.value+")</span>、")}),y=y.substring(0,y.length-1),s='<div class="describe-text">从关注人群的地域分布来看，对参与话题讨论的网民言论样本进行分析发现,关注地域主要集中在'+y+"等几个地区。</div>"}else s="暂无相关数据";t.option=g,t.description=s}});!r;)s.runLoopOnce();return t},getCommentHotKeywordsChart:function(e){var t={},r=!1,o={limit:50,mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord,s_date:e.startDate,e_date:e.endDate},l=n.webserviceUrl+"/es/hotWords.json?"+i.stringify(o);for(a({url:l,method:"get",json:!0,headers:c.getRequestHeader()},function(e,n,o){if(e||200!=n.statusCode)console.log("get getArticleHotKeywordsChart data error");else{console.log("getCommentHotKeywordsChart http request return!"),r=!0;var a=[],i="";if(o.length>0){var s=!0,l=!1,d=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var p=c.value,f={};f.keyword=p.key,f.score=p.value,a.push(f)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}var h={data:a};if(o.length>0){var g="";o.forEach(function(e,t){t<5&&(g+="<span class='describe-redText'>"+e.key+"("+e.value+")</span>、")}),g=g.substring(0,g.length-1),i="<div class='describe-text'>根据互联网抓取的数据，热点关键词词频较高的是"+g+"等。</div>"}else i="暂无相关数据";t.option=h,t.description=i}});!r;)s.runLoopOnce();return t},getSpecialRecommendArticles:function(e){var t={},r=!1,o={date:{startDate:e.startDate,endDate:e.endDate},filed:"",keyword:{mustWord:e.mustWord,mustNotWord:e.mustNotWord,shouldWord:e.shouldWord},page:{limit:4,page:1},searchKv:[{key:"title.cn",value:"安徽"}],type:["news"]},i=n.webserviceUrl+"/es/titleTimeAxis";for(a({url:i,method:"post",json:!0,headers:c.getRequestHeader(),body:o},function(e,n,o){if(e||200!=n.statusCode)console.log("get getSpecialRecommendArticles data error");else{console.log("getSpecialRecommendArticles http request return!"),r=!0,o=o.content;var a="",i={};if(o.length>0){var s="";o.forEach(function(e,t){t<4&&(e.title.length>30&&(e.title=e.title.substring(0,30)+"..."),e.content.length>300&&(e.content=e.content.substring(0,300)+"..."),e.pubTime=l.formatDate(new Date(e.pubTime),"yyyy-MM-dd"),s+="<div class='article-item'><div class='article-title'>"+e.title+"</div><div class='article-source'>信息来源："+e.site+"</div><div class='article-pubTime'>发布时间："+e.pubTime+"</div><div class='article-link'>原文链接：<a href='"+e.url+"' target='_blank'>"+e.url+"</a></div><div class='article-content'>"+e.content+"</div></div>")}),a="<div class='describe-text'>"+s+"</div>"}else a="暂无相关数据";t.option=i,t.description=a}});!r;)s.runLoopOnce();return t}};e.exports=p},function(e,t){e.exports=require("d3")},function(e,t){e.exports=require("d3-cloud")},function(e,t){e.exports=require("d3-node")},function(e,t){e.exports=require("d3node-output")},function(e,t){e.exports=require("echarts")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("svg2png")}]);